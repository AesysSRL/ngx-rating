{"ast":null,"code":"import { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BehaviorSubject } from 'rxjs';\nimport { getColorScale, toColorString } from './color-generator';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\n\nconst _c0 = function (a0) {\n  return {\n    \"margin\": a0\n  };\n};\n\nfunction NgxRatingLibComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(4, _c0, ctx_r0.titlePosition === \"top\" ? \"0 0 20px 0\" : ctx_r0.titlePosition === \"bottom\" ? \"20px 0 0 0\" : ctx_r0.titlePosition === \"left\" ? \"0 20px 0 0\" : ctx_r0.titlePosition === \"right\" ? \"0 0 0 20px\" : \"\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 2, ctx_r0.showDescription$), \" \");\n  }\n}\n\nconst _c1 = function (a0) {\n  return {\n    \"background-color\": a0\n  };\n};\n\nfunction NgxRatingLibComponent_div_2_ng_container_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵlistener(\"mouseover\", function NgxRatingLibComponent_div_2_ng_container_1_div_2_Template_div_mouseover_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      const idx_r4 = ctx_r10.index;\n      const item_r3 = ctx_r10.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.mouseOver(idx_r4, item_r3);\n    })(\"mouseleave\", function NgxRatingLibComponent_div_2_ng_container_1_div_2_Template_div_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext(3);\n      return ctx_r12.mouseLeave();\n    })(\"click\", function NgxRatingLibComponent_div_2_ng_container_1_div_2_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext();\n      const idx_r4 = ctx_r14.index;\n      const item_r3 = ctx_r14.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.getScaleItemChange(idx_r4, item_r3);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const idx_r4 = i0.ɵɵnextContext().index;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"width\", ctx_r5.details.width, \"px\")(\"height\", ctx_r5.details.height, \"px\");\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(5, _c1, idx_r4 <= ctx_r5.showSelection ? ctx_r5.color[idx_r4] : \"grey\"));\n  }\n}\n\nconst _c2 = function (a0, a1) {\n  return {\n    \"background-color\": a0,\n    \"border-radius\": a1\n  };\n};\n\nfunction NgxRatingLibComponent_div_2_ng_container_1_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵlistener(\"mouseover\", function NgxRatingLibComponent_div_2_ng_container_1_div_3_Template_div_mouseover_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      const idx_r4 = ctx_r17.index;\n      const item_r3 = ctx_r17.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return ctx_r16.mouseOver(idx_r4, item_r3);\n    })(\"mouseleave\", function NgxRatingLibComponent_div_2_ng_container_1_div_3_Template_div_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext(3);\n      return ctx_r19.mouseLeave();\n    })(\"click\", function NgxRatingLibComponent_div_2_ng_container_1_div_3_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r21 = i0.ɵɵnextContext();\n      const idx_r4 = ctx_r21.index;\n      const item_r3 = ctx_r21.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return ctx_r20.getScaleItemChange(idx_r4, item_r3);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const idx_r4 = i0.ɵɵnextContext().index;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"width\", ctx_r6.details.width, \"px\")(\"height\", ctx_r6.details.height, \"px\");\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction2(5, _c2, idx_r4 <= ctx_r6.showSelection ? ctx_r6.color[idx_r4] : \"grey\", idx_r4 === 0 ? \"8px 0 0 8px\" : idx_r4 === ctx_r6.items.length - 1 ? \"0 8px 8px 0\" : \"\"));\n  }\n}\n\nfunction NgxRatingLibComponent_div_2_ng_container_1_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 12);\n  }\n\n  if (rf & 2) {\n    const idx_r4 = i0.ɵɵnextContext(2).index;\n    const ctx_r23 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleMapInterpolate5(\"\\n                            mask-size: \", ctx_r23.details.width, \"px \", ctx_r23.details.height, \"px;\\n                            -webkit-mask: url(\", ctx_r23.images[0], \") no-repeat center;\\n                            -webkit-mask-size: \", ctx_r23.details.width, \"px \", ctx_r23.details.height, \"px\");\n    i0.ɵɵstyleProp(\"width\", ctx_r23.details.width, \"px\")(\"height\", ctx_r23.details.height, \"px\")(\"mask\", ctx_r23.images[0], \"url\");\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(14, _c1, idx_r4 <= ctx_r23.showSelection ? ctx_r23.color[idx_r4] : \"grey\"));\n  }\n}\n\nfunction NgxRatingLibComponent_div_2_ng_container_1_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵlistener(\"mouseover\", function NgxRatingLibComponent_div_2_ng_container_1_div_4_Template_div_mouseover_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext();\n      const idx_r4 = ctx_r26.index;\n      const item_r3 = ctx_r26.$implicit;\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return ctx_r25.mouseOver(idx_r4, item_r3);\n    })(\"mouseleave\", function NgxRatingLibComponent_div_2_ng_container_1_div_4_Template_div_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r28 = i0.ɵɵnextContext(3);\n      return ctx_r28.mouseLeave();\n    })(\"click\", function NgxRatingLibComponent_div_2_ng_container_1_div_4_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r30 = i0.ɵɵnextContext();\n      const idx_r4 = ctx_r30.index;\n      const item_r3 = ctx_r30.$implicit;\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return ctx_r29.getScaleItemChange(idx_r4, item_r3);\n    });\n    i0.ɵɵtemplate(1, NgxRatingLibComponent_div_2_ng_container_1_div_4_div_1_Template, 1, 16, \"div\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.images);\n  }\n}\n\nfunction NgxRatingLibComponent_div_2_ng_container_1_div_5_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n\n  if (rf & 2) {\n    const idx_r4 = i0.ɵɵnextContext(3).index;\n    const ctx_r32 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleMapInterpolate6(\"\\n                                mask: url(\", ctx_r32.images[0], \");\\n                                mask-size: \", ctx_r32.details.width, \"px \", ctx_r32.details.height, \"px;\\n                                -webkit-mask: url(\", ctx_r32.images[0], \") no-repeat center;\\n                                -webkit-mask-size: \", ctx_r32.details.width, \"px \", ctx_r32.details.height, \"px;\");\n    i0.ɵɵstyleProp(\"width\", ctx_r32.details.width, \"px\")(\"height\", ctx_r32.details.height, \"px\")(\"background-color\", ctx_r32.color[idx_r4]);\n  }\n}\n\nfunction NgxRatingLibComponent_div_2_ng_container_1_div_5_div_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n\n  if (rf & 2) {\n    const ctx_r34 = i0.ɵɵnextContext(5);\n    i0.ɵɵstyleMapInterpolate6(\"\\n                                    mask: url(\", ctx_r34.images[1], \");\\n                                    mask-size: \", ctx_r34.details.width, \"px \", ctx_r34.details.height, \"px;\\n                                    -webkit-mask: url(\", ctx_r34.images[1], \") no-repeat center;\\n                                    -webkit-mask-size: \", ctx_r34.details.width, \"px \", ctx_r34.details.height, \"px;\");\n    i0.ɵɵstyleProp(\"width\", ctx_r34.details.width, \"px\")(\"height\", ctx_r34.details.height, \"px\")(\"background-color\", \"grey\");\n  }\n}\n\nfunction NgxRatingLibComponent_div_2_ng_container_1_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, NgxRatingLibComponent_div_2_ng_container_1_div_5_div_1_div_1_Template, 1, 14, \"div\", 15);\n    i0.ɵɵtemplate(2, NgxRatingLibComponent_div_2_ng_container_1_div_5_div_1_ng_template_2_Template, 1, 14, \"ng-template\", null, 16, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r33 = i0.ɵɵreference(3);\n\n    const idx_r4 = i0.ɵɵnextContext(2).index;\n    const ctx_r31 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", idx_r4 <= ctx_r31.showSelection)(\"ngIfElse\", _r33);\n  }\n}\n\nfunction NgxRatingLibComponent_div_2_ng_container_1_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r39 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵlistener(\"mouseover\", function NgxRatingLibComponent_div_2_ng_container_1_div_5_Template_div_mouseover_0_listener() {\n      i0.ɵɵrestoreView(_r39);\n      const ctx_r38 = i0.ɵɵnextContext();\n      const idx_r4 = ctx_r38.index;\n      const item_r3 = ctx_r38.$implicit;\n      const ctx_r37 = i0.ɵɵnextContext(2);\n      return ctx_r37.mouseOver(idx_r4, item_r3);\n    })(\"mouseleave\", function NgxRatingLibComponent_div_2_ng_container_1_div_5_Template_div_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r39);\n      const ctx_r40 = i0.ɵɵnextContext(3);\n      return ctx_r40.mouseLeave();\n    })(\"click\", function NgxRatingLibComponent_div_2_ng_container_1_div_5_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r39);\n      const ctx_r42 = i0.ɵɵnextContext();\n      const idx_r4 = ctx_r42.index;\n      const item_r3 = ctx_r42.$implicit;\n      const ctx_r41 = i0.ɵɵnextContext(2);\n      return ctx_r41.getScaleItemChange(idx_r4, item_r3);\n    });\n    i0.ɵɵtemplate(1, NgxRatingLibComponent_div_2_ng_container_1_div_5_div_1_Template, 4, 2, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.images);\n  }\n}\n\nfunction NgxRatingLibComponent_div_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵtemplate(2, NgxRatingLibComponent_div_2_ng_container_1_div_2_Template, 1, 7, \"div\", 7);\n    i0.ɵɵtemplate(3, NgxRatingLibComponent_div_2_ng_container_1_div_3_Template, 1, 8, \"div\", 7);\n    i0.ɵɵtemplate(4, NgxRatingLibComponent_div_2_ng_container_1_div_4_Template, 2, 1, \"div\", 8);\n    i0.ɵɵtemplate(5, NgxRatingLibComponent_div_2_ng_container_1_div_5_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitch\", ctx_r2.theme);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"squares\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"rounded_squares\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"single_icon\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"multiple_icons\");\n  }\n}\n\nfunction NgxRatingLibComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtemplate(1, NgxRatingLibComponent_div_2_ng_container_1_Template, 6, 5, \"ng-container\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.items);\n  }\n}\n\nconst _c3 = function (a0) {\n  return {\n    \"flex-direction\": a0\n  };\n};\n\nexport let NgxRatingLibComponent = /*@__PURE__*/(() => {\n  class NgxRatingLibComponent {\n    constructor() {\n      this.items = [];\n      this.theme = 'squares';\n      this.styles = [];\n      this.showTitle = false;\n      this.titlePosition = 'top';\n      this.details = {};\n      this.style = [];\n      this.showDescriptionBS = new BehaviorSubject('-');\n      this.showDescription$ = this.showDescriptionBS.asObservable();\n      this.actualDescription = '-';\n      this.showSelection = -1;\n      this.actualSelection = -1;\n      this.color = [];\n\n      this.onChange = item => {};\n\n      this.onTouch = item => {};\n    }\n\n    ngOnInit() {\n      this.items = this.settings.items || [];\n      this.items = getColorScale(this.items);\n      this.color = this.items.map(item => toColorString(item.color || {}));\n      this.theme = this.settings.theme || 'squares';\n\n      if ('images' in this.settings) {\n        this.images = this.settings.images;\n      }\n\n      this.showTitle = this.settings.showTitle;\n      this.titlePosition = this.settings.titlePosition || 'top';\n      this.details = this.settings.itemDetail;\n    }\n\n    writeValue(item) {\n      if (Object.keys(item).length !== 0) {\n        this.actualDescription = item.description;\n        this.showDescriptionBS.next(item.description);\n        this.actualSelection = this.items.indexOf(this.items.find(el => item.id === el.id) || {});\n        this.showSelection = this.actualSelection;\n      } else {\n        this.actualDescription = '-';\n        this.showDescriptionBS.next('-');\n      }\n    }\n\n    registerOnChange(fn) {\n      this.onChange = fn;\n    }\n\n    registerOnTouched(fn) {\n      this.onTouch = fn;\n    }\n\n    mouseOver(selectedIdx, item) {\n      this.showDescriptionBS.next(item.description);\n      this.showSelection = selectedIdx;\n    }\n\n    mouseLeave() {\n      this.showSelection = this.actualSelection;\n      this.showDescriptionBS.next(this.actualDescription);\n    }\n\n    getScaleItemChange(indexSelected, item) {\n      if (this.actualSelection !== indexSelected) {\n        this.actualSelection = indexSelected;\n        this.showSelection = indexSelected;\n        this.actualDescription = item.description;\n        this.showDescriptionBS.next(item.description);\n        this.onChange(item);\n      }\n    }\n\n  }\n\n  NgxRatingLibComponent.ɵfac = function NgxRatingLibComponent_Factory(t) {\n    return new (t || NgxRatingLibComponent)();\n  };\n\n  NgxRatingLibComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NgxRatingLibComponent,\n    selectors: [[\"ngx-rating-lib\"]],\n    inputs: {\n      settings: \"settings\"\n    },\n    features: [i0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: NgxRatingLibComponent\n    }])],\n    decls: 3,\n    vars: 5,\n    consts: [[1, \"rating-container\", 3, \"ngStyle\"], [\"class\", \"title\", 3, \"ngStyle\", 4, \"ngIf\"], [\"class\", \"container-scale\", 4, \"ngIf\"], [1, \"title\", 3, \"ngStyle\"], [1, \"container-scale\"], [4, \"ngFor\", \"ngForOf\"], [3, \"ngSwitch\"], [\"class\", \"item\", 3, \"width\", \"height\", \"ngStyle\", \"mouseover\", \"mouseleave\", \"click\", 4, \"ngSwitchCase\"], [3, \"mouseover\", \"mouseleave\", \"click\", 4, \"ngSwitchCase\"], [1, \"item\", 3, \"ngStyle\", \"mouseover\", \"mouseleave\", \"click\"], [3, \"mouseover\", \"mouseleave\", \"click\"], [\"class\", \"item\", 3, \"width\", \"height\", \"mask\", \"style\", \"ngStyle\", 4, \"ngIf\"], [1, \"item\", 3, \"ngStyle\"], [\"class\", \"item\", 4, \"ngIf\"], [1, \"item\"], [3, \"width\", \"height\", \"backgroundColor\", \"style\", 4, \"ngIf\", \"ngIfElse\"], [\"falseItems\", \"\"]],\n    template: function NgxRatingLibComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, NgxRatingLibComponent_div_1_Template, 3, 6, \"div\", 1);\n        i0.ɵɵtemplate(2, NgxRatingLibComponent_div_2_Template, 2, 1, \"div\", 2);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c3, ctx.titlePosition === \"top\" ? \"column\" : ctx.titlePosition === \"left\" ? \"row\" : ctx.titlePosition === \"right\" ? \"row-reverse\" : \"column-reverse\"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showTitle);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.settings);\n      }\n    },\n    directives: [i1.NgStyle, i1.NgIf, i1.NgForOf, i1.NgSwitch, i1.NgSwitchCase],\n    pipes: [i1.AsyncPipe],\n    styles: [\".rating-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.title[_ngcontent-%COMP%]{text-transform:lowercase}.container-scale[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.item[_ngcontent-%COMP%]{margin-right:10px}\"]\n  });\n  return NgxRatingLibComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}