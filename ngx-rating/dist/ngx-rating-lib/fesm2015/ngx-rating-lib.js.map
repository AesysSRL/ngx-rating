{"version":3,"file":"ngx-rating-lib.js","sources":["../../../projects/ngx-rating-lib/src/lib/ngx-rating-lib.service.ts","../../../projects/ngx-rating-lib/src/lib/color-generator.ts","../../../projects/ngx-rating-lib/src/lib/ngx-rating-lib.component.ts","../../../projects/ngx-rating-lib/src/lib/ngx-rating-lib.module.ts","../../../projects/ngx-rating-lib/src/public-api.ts","../../../projects/ngx-rating-lib/src/ngx-rating-lib.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxRatingLibService {\n\n  constructor() { }\n}\n","export function getColorScale(itemNum: number): string[] {\r\n\r\n  let color = [];\r\n  let valueRed: number = 0;\r\n  let valueGreen: number = 90;\r\n  let valueBlue: number = 141;\r\n  color.push(`rgb(${valueRed},${valueGreen},${valueBlue})`);\r\n\r\n  for (let idx = 0; idx < itemNum - 2; idx++) {\r\n\r\n    if (valueRed <= 180 && valueGreen <= 230 && valueBlue <= 245) {\r\n      valueRed = valueRed + 20;\r\n      valueGreen = valueGreen + 30;\r\n      valueBlue = valueBlue + 30;\r\n    }\r\n    if (valueBlue >= 230) {\r\n      valueRed = valueRed + 20;\r\n      valueGreen = valueGreen + 10;\r\n      if(valueRed >= 230){\r\n        valueRed = valueRed + 20;\r\n      }\r\n    }\r\n    color.push(`rgb(${valueRed},${valueGreen},${valueBlue})`);\r\n\r\n  }\r\n\r\n  valueRed = 180;\r\n  valueGreen = 230;\r\n  valueBlue = 245;\r\n  color.push(`rgb(${valueRed},${valueGreen},${valueBlue})`);\r\n  color.reverse();\r\n\r\n  return color;\r\n\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BehaviorSubject } from 'rxjs';\nimport { getColorScale } from './color-generator';\nimport { Item, Settings } from './model';\n\n@Component({\n  selector: 'ngx-rating-lib',\n  template: `\n    <div>\n      {{showDescription$ | async}}\n    </div>\n    <div class=\"container-scale\" *ngIf=\"settings\">\n        <ng-container *ngFor=\"let item of settings.items; let idx = index\">\n          <div class=\"item\"\n          (mouseover)=\"mouseOver(idx, item)\"\n          (mouseleave)=\"mouseLeave()\"\n          (click)=\"getScaleItemChange(idx, item)\"\n          [ngStyle]=\"{'background-color': (idx <= showSelection) ? color[idx] : ''}\"\n        >\n        </div>\n        </ng-container>\n      </div>\n  `,\n  styles: [\n    `\n    .container-scale {\n        display: flex;\n        margin-left: 30.4%;\n    }\n    .item{\n        width: 70px;\n        height: 8px;\n        margin-right: 10px;\n        background-color: grey;\n    }\n    `\n  ],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi:true,\n      useExisting: NgxRatingLibComponent\n    }\n  ]\n})\nexport class NgxRatingLibComponent implements OnInit, ControlValueAccessor  {\n\n  @Input() settings?: Settings;\n  items: Item[] = []\n\n  showDescriptionBS = new BehaviorSubject<string>('-');\n  showDescription$ = this.showDescriptionBS.asObservable();\n  actualDescription: string = '-';\n\n  showSelection: number = -1;\n  actualSelection: number = -1;\n  public color: string[] = [];\n\n\n  onChange = (item: Item) => {};\n  onTouch = (item: Item) => {};\n\n  constructor() {\n    console.log('constructor');\n  }\n\n  ngOnInit(): void {\n    console.log('on init');\n    this.items = this.settings?.items || [];\n    this.color = getColorScale(this.items.length);\n  }\n\n  writeValue(item: Item): void {\n    this.actualDescription = item.description;\n    this.showDescriptionBS.next(item.description);\n    this.actualSelection = this.settings?.items.indexOf(item) || -1;\n    this.showSelection = this.actualSelection;\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouch = fn;\n  }\n\n  mouseOver(selectedIdx: number, item: Item){\n    this.showDescriptionBS.next(item.description);\n    this.showSelection = selectedIdx;\n  }\n\n  mouseLeave(){\n    this.showSelection = this.actualSelection;\n    this.showDescriptionBS.next(this.actualDescription);\n  }\n\n  getScaleItemChange(indexSelected: number, item: Item){\n    const index = this.items.indexOf(item);\n    if (this.actualSelection !== index) {\n\n      this.actualSelection = index;\n      this.showSelection = index;\n      this.actualDescription = item.description;\n      this.showDescriptionBS.next(item.description);\n      this.onChange(item);\n    }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgxRatingLibComponent } from './ngx-rating-lib.component';\n\n\n\n@NgModule({\n  declarations: [\n    NgxRatingLibComponent\n  ],\n  imports: [\n    BrowserModule\n  ],\n  exports: [\n    NgxRatingLibComponent\n  ]\n})\nexport class NgxRatingLibModule { }\n","/*\n * Public API Surface of ngx-rating-lib\n */\n\nexport * from './lib/ngx-rating-lib.service';\nexport * from './lib/ngx-rating-lib.component';\nexport * from './lib/ngx-rating-lib.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;;;MAKa,mBAAmB;IAE9B,iBAAiB;;gHAFN,mBAAmB;oHAAnB,mBAAmB,cAFlB,MAAM;2FAEP,mBAAmB;kBAH/B,UAAU;mBAAC;oBACV,UAAU,EAAE,MAAM;iBACnB;;;SCJe,aAAa,CAAC,OAAe;IAE3C,IAAI,KAAK,GAAG,EAAE,CAAC;IACf,IAAI,QAAQ,GAAW,CAAC,CAAC;IACzB,IAAI,UAAU,GAAW,EAAE,CAAC;IAC5B,IAAI,SAAS,GAAW,GAAG,CAAC;IAC5B,KAAK,CAAC,IAAI,CAAC,OAAO,QAAQ,IAAI,UAAU,IAAI,SAAS,GAAG,CAAC,CAAC;IAE1D,KAAK,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,OAAO,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE;QAE1C,IAAI,QAAQ,IAAI,GAAG,IAAI,UAAU,IAAI,GAAG,IAAI,SAAS,IAAI,GAAG,EAAE;YAC5D,QAAQ,GAAG,QAAQ,GAAG,EAAE,CAAC;YACzB,UAAU,GAAG,UAAU,GAAG,EAAE,CAAC;YAC7B,SAAS,GAAG,SAAS,GAAG,EAAE,CAAC;SAC5B;QACD,IAAI,SAAS,IAAI,GAAG,EAAE;YACpB,QAAQ,GAAG,QAAQ,GAAG,EAAE,CAAC;YACzB,UAAU,GAAG,UAAU,GAAG,EAAE,CAAC;YAC7B,IAAG,QAAQ,IAAI,GAAG,EAAC;gBACjB,QAAQ,GAAG,QAAQ,GAAG,EAAE,CAAC;aAC1B;SACF;QACD,KAAK,CAAC,IAAI,CAAC,OAAO,QAAQ,IAAI,UAAU,IAAI,SAAS,GAAG,CAAC,CAAC;KAE3D;IAED,QAAQ,GAAG,GAAG,CAAC;IACf,UAAU,GAAG,GAAG,CAAC;IACjB,SAAS,GAAG,GAAG,CAAC;IAChB,KAAK,CAAC,IAAI,CAAC,OAAO,QAAQ,IAAI,UAAU,IAAI,SAAS,GAAG,CAAC,CAAC;IAC1D,KAAK,CAAC,OAAO,EAAE,CAAC;IAEhB,OAAO,KAAK,CAAC;AAEf;;MCYa,qBAAqB;IAiBhC;QAdA,UAAK,GAAW,EAAE,CAAA;QAElB,sBAAiB,GAAG,IAAI,eAAe,CAAS,GAAG,CAAC,CAAC;QACrD,qBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,YAAY,EAAE,CAAC;QACzD,sBAAiB,GAAW,GAAG,CAAC;QAEhC,kBAAa,GAAW,CAAC,CAAC,CAAC;QAC3B,oBAAe,GAAW,CAAC,CAAC,CAAC;QACtB,UAAK,GAAa,EAAE,CAAC;QAG5B,aAAQ,GAAG,CAAC,IAAU,QAAO,CAAC;QAC9B,YAAO,GAAG,CAAC,IAAU,QAAO,CAAC;QAG3B,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;KAC5B;IAED,QAAQ;;QACN,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACvB,IAAI,CAAC,KAAK,GAAG,CAAA,MAAA,IAAI,CAAC,QAAQ,0CAAE,KAAK,KAAI,EAAE,CAAC;QACxC,IAAI,CAAC,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;KAC/C;IAED,UAAU,CAAC,IAAU;;QACnB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC;QAC1C,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC9C,IAAI,CAAC,eAAe,GAAG,CAAA,MAAA,IAAI,CAAC,QAAQ,0CAAE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAC;QAChE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC;KAC3C;IAED,gBAAgB,CAAC,EAAO;QACtB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;KACpB;IAED,iBAAiB,CAAC,EAAO;QACvB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;KACnB;IAED,SAAS,CAAC,WAAmB,EAAE,IAAU;QACvC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAC9C,IAAI,CAAC,aAAa,GAAG,WAAW,CAAC;KAClC;IAED,UAAU;QACR,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC;QAC1C,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;KACrD;IAED,kBAAkB,CAAC,aAAqB,EAAE,IAAU;QAClD,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,IAAI,CAAC,eAAe,KAAK,KAAK,EAAE;YAElC,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;YAC7B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC;YAC1C,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAC9C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SACrB;KACF;;kHA9DU,qBAAqB;sGAArB,qBAAqB,2EARrB;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,KAAK,EAAC,IAAI;YACV,WAAW,EAAE,qBAAqB;SACnC;KACF,0BApCS;;;;;;;;;;;;;;;GAeT;2FAuBU,qBAAqB;kBAxCjC,SAAS;mBAAC;oBACT,QAAQ,EAAE,gBAAgB;oBAC1B,QAAQ,EAAE;;;;;;;;;;;;;;;GAeT;oBACD,MAAM,EAAE;wBACN;;;;;;;;;;;KAWC;qBACF;oBACD,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,KAAK,EAAC,IAAI;4BACV,WAAW,uBAAuB;yBACnC;qBACF;iBACF;0EAGU,QAAQ;sBAAhB,KAAK;;;MC/BK,kBAAkB;;+GAAlB,kBAAkB;gHAAlB,kBAAkB,iBAT3B,qBAAqB,aAGrB,aAAa,aAGb,qBAAqB;gHAGZ,kBAAkB,YAPpB;YACP,aAAa;SACd;2FAKU,kBAAkB;kBAX9B,QAAQ;mBAAC;oBACR,YAAY,EAAE;wBACZ,qBAAqB;qBACtB;oBACD,OAAO,EAAE;wBACP,aAAa;qBACd;oBACD,OAAO,EAAE;wBACP,qBAAqB;qBACtB;iBACF;;;AChBD;;;;ACAA;;;;;;"}