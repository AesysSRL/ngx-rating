{"version":3,"file":"ngx-rating-lib.umd.js","sources":["../../../projects/ngx-rating-lib/src/lib/ngx-rating-lib.service.ts","../../../projects/ngx-rating-lib/src/lib/color-generator.ts","../../../projects/ngx-rating-lib/src/lib/ngx-rating-lib.component.ts","../../../projects/ngx-rating-lib/src/lib/ngx-rating-lib.module.ts","../../../projects/ngx-rating-lib/src/public-api.ts","../../../projects/ngx-rating-lib/src/ngx-rating-lib.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxRatingLibService {\n\n  constructor() { }\n}\n","export function getColorScale(itemNum: number): string[] {\r\n\r\n  let color = [];\r\n  let valueRed: number = 0;\r\n  let valueGreen: number = 90;\r\n  let valueBlue: number = 141;\r\n  color.push(`rgb(${valueRed},${valueGreen},${valueBlue})`);\r\n\r\n  for (let idx = 0; idx < itemNum - 2; idx++) {\r\n\r\n    if (valueRed <= 180 && valueGreen <= 230 && valueBlue <= 245) {\r\n      valueRed = valueRed + 20;\r\n      valueGreen = valueGreen + 30;\r\n      valueBlue = valueBlue + 30;\r\n    }\r\n    if (valueBlue >= 230) {\r\n      valueRed = valueRed + 20;\r\n      valueGreen = valueGreen + 10;\r\n      if(valueRed >= 230){\r\n        valueRed = valueRed + 20;\r\n      }\r\n    }\r\n    color.push(`rgb(${valueRed},${valueGreen},${valueBlue})`);\r\n\r\n  }\r\n\r\n  valueRed = 180;\r\n  valueGreen = 230;\r\n  valueBlue = 245;\r\n  color.push(`rgb(${valueRed},${valueGreen},${valueBlue})`);\r\n  color.reverse();\r\n\r\n  return color;\r\n\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { BehaviorSubject } from 'rxjs';\nimport { getColorScale } from './color-generator';\nimport { Item, Settings } from './model';\n\n@Component({\n  selector: 'ngx-rating-lib',\n  template: `\n    <div>\n      {{showDescription$ | async}}\n    </div>\n    <div class=\"container-scale\" *ngIf=\"settings\">\n        <ng-container *ngFor=\"let item of settings.items; let idx = index\">\n          <div class=\"item\"\n          (mouseover)=\"mouseOver(idx, item)\"\n          (mouseleave)=\"mouseLeave()\"\n          (click)=\"getScaleItemChange(idx, item)\"\n          [ngStyle]=\"{'background-color': (idx <= showSelection) ? color[idx] : ''}\"\n        >\n        </div>\n        </ng-container>\n      </div>\n  `,\n  styles: [\n    `\n    .container-scale {\n        display: flex;\n        margin-left: 30.4%;\n    }\n    .item{\n        width: 70px;\n        height: 8px;\n        margin-right: 10px;\n        background-color: grey;\n    }\n    `\n  ],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi:true,\n      useExisting: NgxRatingLibComponent\n    }\n  ]\n})\nexport class NgxRatingLibComponent implements OnInit, ControlValueAccessor  {\n\n  @Input() settings?: Settings;\n  items: Item[] = []\n\n  showDescriptionBS = new BehaviorSubject<string>('-');\n  showDescription$ = this.showDescriptionBS.asObservable();\n  actualDescription: string = '-';\n\n  showSelection: number = -1;\n  actualSelection: number = -1;\n  public color: string[] = [];\n\n\n  onChange = (item: Item) => {};\n  onTouch = (item: Item) => {};\n\n  constructor() {\n    console.log('constructor');\n  }\n\n  ngOnInit(): void {\n    console.log('on init');\n    this.items = this.settings?.items || [];\n    this.color = getColorScale(this.items.length);\n  }\n\n  writeValue(item: Item): void {\n    this.actualDescription = item.description;\n    this.showDescriptionBS.next(item.description);\n    this.actualSelection = this.settings?.items.indexOf(item) || -1;\n    this.showSelection = this.actualSelection;\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouch = fn;\n  }\n\n  mouseOver(selectedIdx: number, item: Item){\n    this.showDescriptionBS.next(item.description);\n    this.showSelection = selectedIdx;\n  }\n\n  mouseLeave(){\n    this.showSelection = this.actualSelection;\n    this.showDescriptionBS.next(this.actualDescription);\n  }\n\n  getScaleItemChange(indexSelected: number, item: Item){\n    const index = this.items.indexOf(item);\n    if (this.actualSelection !== index) {\n\n      this.actualSelection = index;\n      this.showSelection = index;\n      this.actualDescription = item.description;\n      this.showDescriptionBS.next(item.description);\n      this.onChange(item);\n    }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgxRatingLibComponent } from './ngx-rating-lib.component';\n\n\n\n@NgModule({\n  declarations: [\n    NgxRatingLibComponent\n  ],\n  imports: [\n    BrowserModule\n  ],\n  exports: [\n    NgxRatingLibComponent\n  ]\n})\nexport class NgxRatingLibModule { }\n","/*\n * Public API Surface of ngx-rating-lib\n */\n\nexport * from './lib/ngx-rating-lib.service';\nexport * from './lib/ngx-rating-lib.component';\nexport * from './lib/ngx-rating-lib.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Injectable","BehaviorSubject","NG_VALUE_ACCESSOR","Component","Input","BrowserModule","NgModule"],"mappings":"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"}